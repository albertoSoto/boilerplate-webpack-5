/*------------------------------------*\
    #LINE-UP
\*------------------------------------*/

.c-line-up {
  margin-bottom: $spacing-unit;
}

  .c-line-up__title {
    margin-bottom: $spacing-unit--small;
  }

  .c-line-up__type {
    @include font-weight(bold);
  }

  .c-line-up__list {
    @include font-size(14px);
    margin: 0 0 $spacing-unit;
    padding: 0;
    list-style-type: none;

    @include mq($from: md) {
      margin-bottom: $spacing-unit--large;
    }
  }

    .c-line-up__list--sub {
      margin-bottom: 0;
    }

  .c-line-up__link {
    color: currentColor;
  }

  .c-line-up__player {
    /* empty for now */
  }

    .c-line-up__player--sub {
      margin-left: $spacing-unit--small;
      color: lighten($color-text, 50%);

      .c-line-up__list--sub & {
        margin-left: 0;
      }
    }

  .c-line-up__icon-wrapper {
    position: relative;
    display: inline-block;
    @include square($spacing-unit--small);
  }

    .c-line-up__icon-wrapper[data-count] {
      margin-right: $spacing-unit--tiny;

      &:before {
        content: attr(data-count);
        display: block;
        position: absolute;
        background-color: $color-black-two;
        border-radius: $radius;
        color: $color-white;
        right: -$spacing-unit--tiny;
        top: -(0.5 * $spacing-unit--tiny);
        text-align: center;
        @include font-size(10px, 10px);
        @include font-weight(bold);
        @include square(10px);
      }
    }

  .c-line-up__icon {
    margin-left: 0.5 * $spacing-unit--tiny;
    @include square($spacing-unit--small);

    .c-line-up__icon-wrapper & {
      display: block;
    }

    .c-pitch__player-icons &.icon-substitution {
      background-color: $color-white;
      border-radius: 100%;
    }
  }

$pitch-line-width: 2px;
$pitch-line-color: #80CA69;
$pitch-color: #59BA3A;

.c-pitch {
  list-style: none;
  position: relative;
  background: $pitch-color linear-gradient(to bottom, rgba(0, 133, 40, 0.1) 50%, transparent 50%);
  background-size: 100% 20%;
  margin: 0 0 $spacing-unit 0;
  overflow: hidden;
  color: $color-white;
  @include font-size(14px, 14px);

  &:before {
    content: "";
    display: block;
    width: 100%;
    padding-bottom: 179.892%;
  }
}

  .c-pitch__link {
    color: inherit;

    &:hover,
    &:focus {
      color: inherit;
    }
  }

  .c-pitch__team {
    position: absolute;
    left: 0;
    z-index: 3;
    padding: $spacing-unit--small;
    @include size(100%, 50%);
  }

    .c-pitch__team--home {
      top: 0;
    }

    .c-pitch__team--away {
      padding: 0 $spacing-unit--small $spacing-unit;
      bottom: 0;
    }

  .c-pitch__formation {
    position: absolute;
    z-index: 2;
    color: $color-black-two;
    @include font-weight(bold);

    .c-pitch__team--home & {
      top: $spacing-unit--small;
      left: $spacing-unit--small;
    }

    .c-pitch__team--away & {
      bottom: $spacing-unit--small;
      right: $spacing-unit--small;
      text-align: right;
    }
  }

  .c-pitch__crest {
    @include square($spacing-unit);
  }

    .c-pitch__crest--home {
      margin-right: $spacing-unit--tiny;
    }

    .c-pitch__crest--away {
      margin-left: $spacing-unit--tiny;
    }

  .c-pitch__player-icons {
    height: 1.5 * $spacing-unit--small;
    margin-left: -(0.5 * $spacing-unit--tiny);
    margin-top: -(1.5 * $spacing-unit--small);
  }

  $width-1-2: percentage(1 / 2);
  $width-1-3: percentage(1 / 3);
  $width-1-4: percentage(1 / 4);
  $width-1-5: percentage(1 / 5);
  $formations: (
      442: (
        (5: $width-1-3, 6: $width-1-3),
        (2: $width-1-3, 0: $width-1-3, 3: $width-1-3),
        (4: $width-1-3, 8: $width-1-3),
        (7: $width-1-3, 0: $width-1-3, 11: $width-1-3),
        (10: $width-1-3, 9: $width-1-3)
      ),
      41212: (
        (5: $width-1-3, 6: $width-1-3),
        (2: $width-1-3, 0: $width-1-3, 3: $width-1-3),
        (4: $width-1-2),
        (7: $width-1-3, 11: $width-1-3),
        (8: $width-1-2),
        (10: $width-1-3, 9: $width-1-3)
      ),
      433: (
        (5: $width-1-3, 6: $width-1-3),
        (2: $width-1-3, 0: $width-1-3, 3: $width-1-3),
        (7: $width-1-3, 4: $width-1-3, 8: $width-1-3),
        (10: $width-1-3, 9: $width-1-3, 11: $width-1-3)
      ),
      451: (
        (5: $width-1-3, 6: $width-1-3),
        (2: $width-1-3, 0: $width-1-3, 3: $width-1-3),
        (4: $width-1-3, 8: $width-1-3),
        (7: $width-1-3, 10: $width-1-3, 11: $width-1-3),
        (9: $width-1-2)
      ),
      4411: (
        (5: $width-1-3, 6: $width-1-3),
        (2: $width-1-3, 0: $width-1-3, 3: $width-1-3),
        (4: $width-1-3, 8: $width-1-3),
        (7: $width-1-3, 0: $width-1-3, 11: $width-1-3),
        (10: $width-1-2),
        (9: $width-1-2)
      ),
      4141: (
        (5: $width-1-3, 6: $width-1-3),
        (2: $width-1-3, 0: $width-1-3, 3: $width-1-3),
        (4: $width-1-2),
        (8: $width-1-3, 10: $width-1-3),
        (7: $width-1-3, 0: $width-1-3, 11: $width-1-3),
        (9: $width-1-2)
      ),
      4231: (
        (5: $width-1-3, 6: $width-1-3),
        (2: $width-1-3, 0: $width-1-3, 3: $width-1-3),
        (8: $width-1-3, 4: $width-1-3),
        (7: $width-1-3, 10: $width-1-3, 11: $width-1-3),
        (9: $width-1-2)
      ),
      4321: (
        (5: $width-1-3, 6: $width-1-3),
        (2: $width-1-3, 0: $width-1-3, 3: $width-1-3),
        (8: $width-1-3, 4: $width-1-3, 7: $width-1-3),
        (10: $width-1-3, 11: $width-1-3),
        (9: $width-1-2)
      ),
      532: (
        (6: $width-1-3, 4: $width-1-3),
        (2: $width-1-3, 5: $width-1-3, 3: $width-1-3),
        (7: $width-1-3, 8: $width-1-3, 11: $width-1-3),
        (10: $width-1-3, 9: $width-1-3)
      ),
      541: (
        (6: $width-1-3, 4: $width-1-3),
        (2: $width-1-3, 5: $width-1-3, 3: $width-1-3),
        (8: $width-1-3, 10: $width-1-3),
        (7: $width-1-3, 0: $width-1-3, 11: $width-1-3),
        (9: $width-1-2)
      ),
      352: (
        (6: $width-1-3, 5: $width-1-3, 4: $width-1-3),
        (2: $width-1-3, 3: $width-1-3),
        (7: $width-1-3, 11: $width-1-3, 8: $width-1-3),
        (10: $width-1-3, 9: $width-1-3)
      ),
      343: (
        (6: $width-1-3, 5: $width-1-3, 4: $width-1-3),
        (7: $width-1-3, 8: $width-1-3),
        (2: $width-1-3, 0: $width-1-3, 3: $width-1-3),
        (10: $width-1-3, 9: $width-1-3, 11: $width-1-3)
      ),
      4222: (
        (5: $width-1-3, 6: $width-1-3),
        (2: $width-1-3, 0: $width-1-3, 3: $width-1-3),
        (4: $width-1-3, 8: $width-1-3),
        (7: $width-1-3, 11: $width-1-3),
        (10: $width-1-3, 9: $width-1-3)
      ),
      3511: (
        (6: $width-1-3, 5: $width-1-3, 4: $width-1-3),
        (7: $width-1-3, 11: $width-1-3, 8: $width-1-3),
        (2: $width-1-3, 0: $width-1-3, 3: $width-1-3),
        (10: $width-1-2),
        (9: $width-1-2)
      ),
      3421: (
        (6: $width-1-3, 5: $width-1-3, 4: $width-1-3),
        (7: $width-1-3, 8: $width-1-3),
        (2: $width-1-3, 0: $width-1-3, 3: $width-1-3),
        (10: $width-1-3, 11: $width-1-3),
        (9: $width-1-2)
      ),
      3412: (
        (6: $width-1-3, 5: $width-1-3, 4: $width-1-3),
        (2: $width-1-3, 3: $width-1-3),
        (7: $width-1-3, 0: $width-1-3, 8: $width-1-3),
        (9: $width-1-2),
        (10: $width-1-3, 11: $width-1-3)
      ),
      3142: (
        (5: $width-1-3, 4: $width-1-3, 6: $width-1-3),
        (8: $width-1-2),
        (7: $width-1-3, 11: $width-1-3),
        (2: $width-1-3, 0: $width-1-3, 3: $width-1-3),
        (9: $width-1-3, 10: $width-1-3)
      ),
      "343d": (
        (5: $width-1-3, 4: $width-1-3, 6: $width-1-3),
        (8: $width-1-2),
        (2: $width-1-3, 0: $width-1-3, 3: $width-1-3),
        (7: $width-1-2),
        (10: $width-1-3, 9: $width-1-3, 11: $width-1-3)
      ),
      4132: (
        (5: $width-1-3, 6: $width-1-3),
        (2: $width-1-3, 0: $width-1-3, 3: $width-1-3),
        (4: $width-1-2),
        (7: $width-1-3, 8: $width-1-3, 11: $width-1-3),
        (9: $width-1-3, 10: $width-1-3)
      ),
      4240: (
        (5: $width-1-3, 6: $width-1-3),
        (2: $width-1-3, 0: $width-1-3, 3: $width-1-3),
        (4: $width-1-3, 8: $width-1-3),
        (7: $width-1-3, 0: $width-1-3, 11: $width-1-3),
        (9: $width-1-3, 10: $width-1-3),
      ),
      4312: (
        (5: $width-1-3, 6: $width-1-3),
        (2: $width-1-3, 0: $width-1-3, 3: $width-1-3),
        (7: $width-1-3, 4: $width-1-3, 11: $width-1-3),
        (8: $width-1-2),
        (9: $width-1-3, 10: $width-1-3),
      ),
      3241: (
        (6: $width-1-3, 5: $width-1-3, 4: $width-1-3),
        (2: $width-1-3, 3: $width-1-3),
        (7: $width-1-3, 8: $width-1-3),
        (10: $width-1-3, 0: $width-1-3, 11: $width-1-3),
        (9: $width-1-2)
      ),
      3331: (
        (6: $width-1-3, 5: $width-1-3, 4: $width-1-3),
        (2: $width-1-3, 8: $width-1-3, 3: $width-1-3),
        (10: $width-1-3, 7: $width-1-3, 11: $width-1-3),
        (9: $width-1-2)
      )
  );

  .c-pitch__players-list {
    position: relative;
    margin: 0;
    padding: 0;
    list-style-type: none;
    @include square(100%);
  }

  .c-pitch__player {
    position: absolute;
    text-align: center;
    padding-top: 1.5 * $spacing-unit--small;

    .c-pitch__team--home & {
      top: 0;
    }

    .c-pitch__team--away & {
      bottom: 0;
    }
  }

  .c-pitch__player--1 {
    left: $width-1-3;
    width: $width-1-3;
  }

  @each $formation, $lines in $formations {
    @each $line in $lines {
      $number-of-lines: length($lines);
      @if $number-of-lines > 0 {
        $top: percentage(1 / ($number-of-lines + 1));
        $rowIndex: index($lines, $line);
        $line-total-width: 0;
        @each $place, $width in $line {
          $line-total-width: $line-total-width + $width;
        }
        $position: (100% - $line-total-width) / 2;
        @each $place, $width in $line {
          @if $place > 0 {
            .c-pitch__player--#{$place} {
              .c-pitch__players-list--#{$formation} & {
                width: $width;

                @if $rowIndex > 0 {
                  $pos: if($position > 0, $position, $position / ($position * 0 + 1));

                  .c-pitch__team--home & {
                    top: $top * $rowIndex;
                    left: $pos;
                  }

                  .c-pitch__team--away & {
                    bottom: $top * $rowIndex;
                    right: $pos;
                  }
                }
              }
            }
          }
          $position: $position + $width;
        }
      }
    }
  }

  .c-pitch__box {
    &:before,
    &:after {
      content: "";
      position: absolute;
      top: 0;
      left: 50%;
      margin: 0 0 0 -18%;
      transform: translateY(-$pitch-line-width);
      display: block;
      padding-bottom: 22.5%;
      width: 36%;
      border: $pitch-line-width solid $pitch-line-color;
    }

    &:after {
      top: auto;
      bottom: 0;
      transform: translateY($pitch-line-width);
    }
  }

  .c-pitch__goal {
    &:before,
    &:after {
      content: "";
      position: absolute;
      top: 0;
      left: 50%;
      margin: 0 0 0 -10%;
      transform: translateY(-$pitch-line-width);
      display: block;
      width: 20%;
      height: 3.5%;
      border: $pitch-line-width solid $pitch-line-color;
    }

    &:after {
      top: auto;
      bottom: 0;
      transform: translateY($pitch-line-width);
    }
  }

  .c-pitch__arc {
    position: absolute;
    left: 50%;
    height: 3.5%;
    width: 16%;
    margin: 0 0 0 -8%;
    overflow: hidden;

    &:before {
      position: absolute;
      content: "";
      display: block;
      width: 100%;
      padding-bottom: 100%;
      border: $pitch-line-width solid $pitch-line-color;
      border-radius: 50%;
    }
  }

    .c-pitch__arc--top {
      top: 12.5%;

      &:before {
        bottom: 0;
      }
    }

    .c-pitch__arc--bottom {
      bottom: 12.5%;
    }

  .c-pitch__center {
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;

    &:before,
    &:after {
      content: "";
      position: absolute;
      width: 100%;
      height: 0;
      top: 50%;
      transform: translateY(-(0.5 * $pitch-line-width));
      border: (0.5 * $pitch-line-width) solid $pitch-line-color;
    }

    &:before {
      content: "";
      position: absolute;
      left: 50%;
      display: block;
      width: 30%;
      padding-bottom: 30%;
      transform: translateY(-$pitch-line-width);
      margin: -15% 0 0 -15%;
      border-radius: 50%;
      border: $pitch-line-width solid $pitch-line-color;
    }
  }
